#include <p16f877A.inc>

	ORG 0
	GOTO main
	ORG 4
	GOTO isr

main:
	BANKSEL TRISB
	MOVLW 0xFF
	MOVWF TRISB
	BANKSEL PORTB
	CLRF PORTB
	BANKSEL TRISD
	CLRF TRISD
	BANKSEL PORTD
	CLRF PORTD
	BANKSEL INTCON
	BSF INTCON, 7
	BSF INTCON, 3
	BSF INTCON, 4
	BANKSEL OPTION_REG
	BSF OPTION_REG, 6

loop:
	BTFSS PORTC, 0
	GOTO loop
	GOTO reset_led

reset_led:
	BTFSC PORTC, 0
	GOTO reset_led
	BCF PORTD, 0
	BCF PORTD, 4
	BCF PORTD, 5
	BCF PORTD, 7
	GOTO loop

isr:
	BCF INTCON, RBIF
	BCF INTCON, INTF
	BANKSEL PORTB
	BANKSEL PORTD
	BTFSC PORTB,0
	BSF PORTD,0
	BTFSC PORTB,4
	BSF PORTD,4
	BTFSC PORTB,5
	BSF PORTD,5
	BTFSC PORTB,7
	BSF PORTD,7
	RETFIE
	END

	
